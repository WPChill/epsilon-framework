!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/assets/js/",i(i.s=4)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.args=e}return e.prototype.request=function(){var e=this;jQuery.ajax({type:"POST",data:{action:"epsilon_framework_ajax_action",args:this.args},dataType:"json",url:EpsilonWPUrls.ajaxurl,success:function(t){e.result=t,jQuery(e).trigger("epsilon-received-success")},error:function(e,t,i){console.log(e+" :: "+t+" :: "+i)}})},e}();t.EpsilonAjaxRequest=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.min=1,this.max=20,this.step=1,this.context=jQuery(e.container).hasClass("slider-container")?jQuery(e.container):jQuery(e.container).find(".slider-container"),this.min=e.params.sliderControls.min,this.max=e.params.sliderControls.max,this.step=e.params.sliderControls.step,this.value=e.params.value,this.context&&this.init()}return e.prototype.init=function(){var e=this.context.find(".ss-slider"),t=this.context.find(".rl-slider"),i=t.attr("id"),n=e.attr("id");jQuery("#"+n).slider({value:this.value,range:"min",min:this.min,max:this.max,step:this.step,slide:function(e,t){jQuery("#"+i).attr("value",t.value)},stop:function(e,t){jQuery("#"+i).trigger("change")}}),jQuery(t).on("focus",function(){jQuery(this).blur()}),jQuery("#"+i).attr("value",jQuery("#"+n).slider("value"))},e}();t.EpsilonRangeSlider=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init(),this.props.hasOwnProperty("linking")&&this._handleLinking()}return Object.defineProperty(e.prototype,"instance",{get:function(){return this._instance},set:function(e){this._instance=e[0].selectize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldOptions",{get:function(){return this._oldOptions},set:function(e){this._oldOptions=e},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.instance=this.props.container.find('[data-field="'+this.props.id+'"]').selectize({plugins:["remove_button"]})},e.prototype._handleLinking=function(){var e=this,t=jQuery("#customize-control-"+this.props.linking[0]);this.oldOptions=_.sortBy(this.instance.options,function(e){return e.$order}),t.on("row:updated-text-field",_.debounce(function(t,i){return e._rowEdit(t,i)},300)),t.on("row:deleted-repeater-field",function(t,i){return e._rowRemove(t,i)}),t.on("row:added-repeater-field",function(t,i){return e._rowAdd(t,i)}),t.on("row:stopped-sorting",function(t,i){return e._sortExistingOptions(i)})},e.prototype._rowRemove=function(e,t){var i=this;_.each(this.instance.options,function(e,n){e.$order===t.index+2&&i.instance.removeOption(e.value,!1)});var n=1;for(var o in this.instance.options)this.instance.options[o].$order=n,n++;this._resetOptions()},e.prototype._rowEdit=function(e,t){if(t.id===this.props.linking[1]){var i=this._determineIfItemExists(t.index+2);null!==i&&this._updateOption(i,t.value)}},e.prototype._rowAdd=function(e,t){t.hasOwnProperty(this.props.linking[1])&&this._createOption(t[this.props.linking[1]])},e.prototype._determineIfItemExists=function(e){var t=this.oldOptions.filter(function(t){return t.$order===e});return t.length?t[0]:null},e.prototype._sortExistingOptions=function(e){var t=this,i=[];e.rows.map(function(e){var n=e.container.find('[data-field="'+t.props.linking[1]+'"]').val();i.push({value:n,text:n,$order:e.index+2})}),i.map(function(e){_.each(t.instance.options,function(t,i,n){t.value===e.value&&(n[i].$order=e.$order)})})},e.prototype._createOption=function(e){this.instance.addOption({value:e.default,text:e.default}),this._resetOptions()},e.prototype._updateOption=function(e,t){this.instance.updateOption(e.value,{text:t,value:t}),this._resetOptions()},e.prototype._resetOptions=function(){this.instance.clearCache(),this.instance.refreshOptions(!1),this.oldOptions=_.sortBy(this.instance.options,function(e){return e.$order})},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.conditionalFields={},this.data=e,this.container=t,this.createConditionalObject()}return e.prototype.createConditionalObject=function(){var e=this;_.each(this.data,function(t){if(void 0!==t.condition){var i=e.container.find('[data-field="'+t.id+'"]').parents(".repeater-field");e.conditionalFields.hasOwnProperty(t.condition[0])?e._pushCondition(t.condition,i):e._createAndPush(t.condition,i),e.setInitialState(i,t.condition)}}),this.bindEvents()},e.prototype.setInitialState=function(e,t){var i=this.container.find('[data-field="'+t[0]+'"]');t[1]instanceof Array?e[_.contains(t[1],this._getFieldValue(i,null))?"show":"hide"]():e[this._getFieldValue(i,t[1])===t[1]?"show":"hide"]()},e.prototype.bindEvents=function(){var e=this;_.each(this.conditionalFields,function(t,i){e.container.find('[data-field="'+i+'"]').on("change",function(i){t.map(function(t){t.value instanceof Array?t.field[_.contains(t.value,e._getFieldValue(jQuery(i.target),null))?"slideDown":"slideUp"]():t.field[e._getFieldValue(jQuery(i.target),t.value)===t.value?"slideDown":"slideUp"]()})})})},e.prototype._getFieldValue=function(e,t){var i;switch(e.attr("type")){case"checkbox":case"epsilon-toggle":i=e.prop("checked");break;default:i=e.val()}return"hasValue"===t&&""!==i&&(i="hasValue"),i},e.prototype._createAndPush=function(e,t){this.conditionalFields[e[0]]=[],this.conditionalFields[e[0]].push({field:t,value:e[1]})},e.prototype._pushCondition=function(e,t){this.conditionalFields[e[0]].push({field:t,value:e[1]})},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(84),i(5),i(6),i(7),i(9),i(11),i(12),i(14),i(16),i(18),i(20),i(22),i(23),i(25),i(40),i(59),i(61),i(63),i(65),i(66),i(68),i(69),new(i(71).EpsilonSectionDescriptionEnhancer),new(i(72).EpsilonZoneFocus)},function(e,t){wp.customize.settingConstructor["epsilon-section-repeater"]=wp.customize.Setting.extend({defaults:_.extend({},wp.customize.Setting.prototype.defaults,{setting_type:"epsilon-setting-repeater"})})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);wp.customize.controlConstructor["epsilon-slider"]=wp.customize.Control.extend({ready:function(){var e=this;new n.EpsilonRangeSlider(e),e.container.on("change","input.rl-slider",function(t){e.setting.set(jQuery(t.target).val())})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(8);wp.customize.controlConstructor["epsilon-icon-picker"]=wp.customize.Control.extend({ready:function(){var e=this;new n.EpsilonIconPicker(e),e.container.on("change","input.epsilon-icon-picker",function(t){e.setting.set(jQuery(t.target).val())})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e){this.control=e,this.control.container.find('[id="'+this.control.params.id+'"]').fontIconPicker({source:EpsilonIconPack})}}();t.EpsilonIconPicker=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10);wp.customize.controlConstructor["epsilon-text-editor"]=wp.customize.Control.extend({ready:function(){var e=this;new n.EpsilonTextEditor(e),e.container.on("change keyup","textarea",function(t){e.setting.set(jQuery(t.target).val())})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.context=jQuery(e.container),this.editorId=e.params.id+"-editor",t&&(this.editorId=e.params.id),i&&wp.editor.remove(this.editorId),this.init()}return e.prototype.init=function(){wp.editor.initialize(this.editorId,{tinymce:{wpautop:!0,browser_spellcheck:!0,wp_autoresize_on:!0,toolbar1:"link numlist bullist forecolor backcolor bold italic underline",setup:function(e){e.on("change",function(t){e.save(),jQuery(e.getElement()).trigger("change")})}},quicktags:!0})},e}();t.EpsilonTextEditor=n},function(e,t){wp.customize.controlConstructor["epsilon-toggle"]=wp.customize.Control.extend({ready:function(){var e=this;e.container.on("change",".epsilon-toggle__input",function(t){e.setting.set(jQuery(t.target).prop("checked"))})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);wp.customize.controlConstructor["epsilon-color-picker"]=wp.customize.Control.extend({ready:function(){var e=this;new n.EpsilonColorPicker(e),e.container.on("change","input.epsilon-color-picker",function(t){e.setting.set(jQuery(t.target).val())})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t,i=this;this.control=e,this.context=jQuery(e.container).find(".epsilon-color-picker"),this.settings={changeDelay:500,theme:"default",change:this.changePallete,format:"rgb",opacity:!0},"function"==typeof jQuery.fn.minicolors&&(""!==this.context.attr("placeholder")&&(this.context.defaultValue=this.context.attr("placeholder")),this.control.hasOwnProperty("params")&&this.control.params.hasOwnProperty("mode")&&"rgba"===this.control.params.mode&&(this.settings.format="rgb",this.settings.opacity=!0),this.context.minicolors(this.settings),(t=this.context.parents(".customize-control-epsilon-color-picker").find("a")).length||(t=this.context.parents(".repeater-field-epsilon-color-picker").find("a")),t.on("click",function(e){e.preventDefault(),i.instance=jQuery(this).parents(".customize-control-epsilon-color-picker").find("input.epsilon-color-picker"),i.instance.length||(i.instance=jQuery(this).parents(".repeater-field-epsilon-color-picker").find("input.epsilon-color-picker")),i.instance.minicolors("value",jQuery(this).attr("data-default")),i.instance.trigger("change")}))}return e.prototype.changePallete=function(e,t){jQuery(".epsilon-color-scheme-selected").find('*[data-field-id="'+jQuery(this).attr("data-customize-setting-link")+'"]').css("background-color",e)},e}();t.EpsilonColorPicker=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(15);wp.customize.controlConstructor["epsilon-customizer-navigation"]=wp.customize.Control.extend({ready:function(){new n.EpsilonCustomizerNavigation(this)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.context=jQuery(e.container),this.multiple=this.context.find(".epsilon-customizer-navigation-container").length>1,this.multiple?this.initMultiple():this.init()}return e.prototype.initMultiple=function(){this.context.find(".epsilon-customizer-navigation-container:not(.initiated)").first().addClass("initiated").map(function(e,t){jQuery(t).find("a").on("click",function(e){e.preventDefault(),void 0!==wp.customize.section(jQuery(this).attr("data-customizer-section"))&&(jQuery(e.target).attr("data-doubled")?wp.customize.section(jQuery(this).attr("data-customizer-section")).headContainer.trigger("click"):wp.customize.section(jQuery(this).attr("data-customizer-section")).focus())})})},e.prototype.init=function(){var e=this.context.find(".epsilon-customizer-navigation-container");e.length&&e.on("click",e.find("a"),function(e){e.preventDefault(),void 0!==wp.customize.section(jQuery(e.target).attr("data-customizer-section"))&&(jQuery(e.target).attr("data-doubled")?wp.customize.section(jQuery(e.target).attr("data-customizer-section")).headContainer.trigger("click"):wp.customize.section(jQuery(e.target).attr("data-customizer-section")).focus())})},e}();t.EpsilonCustomizerNavigation=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(17);wp.customize.controlConstructor["epsilon-image"]=wp.customize.Control.extend({ready:function(){new n.EpsilonImage(this)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e){this.control=e,this.context=jQuery(e.container),this.handleEvents()}return e.prototype.handleEvents=function(){var e,t,i,o,s=this,a={id:"",url:""},r=this.context.find(".epsilon-controller-image-container > input");this.context.on("click",".placeholder, .epsilon-image, .image-replace-button",function(n){(e=wp.media({multiple:!1}).open()).on("select",function(){t=e.state().get("selection").first(),i=r.attr("data-size"),void 0===t.toJSON().sizes[i]&&(i="full"),a.id=t.id,a.url=t.toJSON().sizes[i].url,s.saveValue(a),s.setImage(a.url),s.context.find(".actions .image-replace-button").show(),s.context.find(".actions .image-remove-button").show(),_.isEmpty(s.control.params.default)||s.context.find(".actions .image-default-button").show()})}),this.context.on("click",".image-remove-button",function(e){e.preventDefault(),o=s.context.find(".epsilon-image"),s.saveValue({id:"",url:""}),o.length&&o.find("img").fadeOut(200,function(){var e,t=EpsilonTranslations.selectFile+'<span class="recommended-size"></span>',s={action:["Epsilon_Helper","get_image_sizes"],nonce:EpsilonWPUrls.ajax_nonce,args:[]};o.removeClass("epsilon-image").addClass("placeholder").html(t),(e=new n.EpsilonAjaxRequest(s)).request(),jQuery(e).on("epsilon-received-success",function(t){_.isUndefined(e.result[i])||o.find(".recommended-size").text(e.result[i].width+" x "+e.result[i].height)})}),jQuery(e.target).hide(),s.context.find(".actions .image-replace-button").hide(),_.isEmpty(s.control.params.default)||s.context.find(".actions .image-default-button").show()}),s.context.on("click",".image-default-button",function(e){e.preventDefault(),o=s.context.find(".epsilon-image"),s.saveValue(s.control.params.default),s.setImage(s.control.params.default.url),s.context.find(".actions .image-replace-button").show(),s.context.find(".actions .image-remove-button").show()})},e.prototype.setImage=function(e){var t=this.context.find(".epsilon-image").length?this.context.find(".epsilon-image"):this.context.find(".placeholder");t.length&&(t.removeClass("epsilon-image placeholder").addClass("epsilon-image"),t.html(""),t.append('<img style="display:none" src="'+e+'" />'),t.find("img").fadeIn(200))},e.prototype.saveValue=function(e){var t=this.context.find(".epsilon-controller-image-container > input");"object"==typeof e&&""!==e.id?(this.control.setting.set(JSON.stringify(e)),jQuery(t).attr("value",JSON.stringify(e)).trigger("change")):(this.control.setting.set(""),jQuery(t).attr("value","").trigger("change"))},e}();t.EpsilonImage=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(19);wp.customize.controlConstructor["epsilon-typography"]=wp.customize.Control.extend({ready:function(){var e=this;new n.EpsilonTypography(e),e.container.on("change",".customize-control-content > .epsilon-typography-input",function(t){e.setting.set(jQuery(t.target).val())})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(){function e(e){var t=this;this.loading=!1,this.control=e,this.context=jQuery(e.container),this.container=this.context.find(".epsilon-typography-container"),this.panel=this.control.container.parent(),this.panel.addClass("epsilon-is-loadable"),this.selects=this.container.find("select"),this.inputs=this.container.find(".epsilon-typography-input"),this.sliders=this.container.find(".slider-container"),this.id=e.params.id,this.init(),this.clearButton(),wp.customize.previewer.bind("epsilon-set-typography-loading",function(e){t.stateChanger(!1)})}return e.prototype.stateChanger=function(e){e?this.startLoading():this.stopLoading()},e.prototype.startLoading=function(){this.loading||(this.loading=!0,this.panel.addClass("epsilon-loading"))},e.prototype.stopLoading=function(){var e=this;setTimeout(function(){e.loading=!1,e.panel.removeClass("epsilon-loading")},150)},e.prototype.clearButton=function(){var e=this;this.context.on("click",".set-default",function(t){e.setDefaults()})},e.prototype.setDefaults=function(){var e=this;_.each(this.control.params.fontDefaults[this.id],function(t,i){if(_.contains(["font-weight","font-style"],i)&&jQuery("#"+e.id+"-"+i).prop("checked",""!==t).trigger("change"),_.contains(["letter-spacing","line-height"],i)&&jQuery("#"+e.id+"-"+i).val(t).trigger("change"),_.contains(["font-family"],i)){var n=jQuery("#"+e.id+"-"+i)[0];(n=n.selectize).setValue(t,!1)}})},e.prototype.init=function(){var e=this;try{this._selectize=this.selects.selectize()}catch(e){console.warn("selectize not yet loaded")}this.context.on("click",".epsilon-typography-advanced > a",function(e){var t=jQuery(this).attr("data-toggle");e.preventDefault(),jQuery(this).toggleClass("active").parent().toggleClass("active"),jQuery("#"+t).slideToggle().addClass("active")}),jQuery.each(this.sliders,function(t,i){var o=jQuery(i).attr("data-slider-type"),s={container:i,params:{value:0,id:"",sliderControls:{min:parseFloat(jQuery(i).find(".ss-slider").attr("data-attr-min")),max:parseFloat(jQuery(i).find(".ss-slider").attr("data-attr-max")),step:parseFloat(jQuery(i).find(".ss-slider").attr("data-attr-step"))}}};switch(o){case"letter-spacing":s.params.value=e.control.params.inputs["letter-spacing"],s.params.id=e.control.params.id+"-letter-spacing";break;case"line-height":s.params.value=e.control.params.inputs["line-height"],s.params.id=e.control.params.id+"-line-height";break;default:s.params.value=e.control.params.inputs["font-size"],s.params.id=e.control.params.id+"-font-size"}new n.EpsilonRangeSlider(s)}),this.handleEvents()},e.prototype.handleEvents=function(){var e=this;this.inputs.on("change",_.debounce(function(){e.stateChanger(!0);var t=e._parseJson();jQuery("#hidden_input_"+e.id).val(t).trigger("change")},300))},e.prototype._parseJson=function(){var e=this,t={action:"epsilon_generate_typography_css",class:"Epsilon_Typography",id:this.control.id,data:{selectors:this.control.params.selectors,stylesheet:this.control.params.stylesheet,id:this.control.id,json:{}}},i=wp.customize;return jQuery.each(this.inputs,function(i,n){var o=jQuery(n).attr("id"),s=e.id+"-",a=jQuery(this).attr("type");o=o.replace(s,""),t.data.json[o]="checkbox"===a?jQuery(this).prop("checked")?jQuery(n).val():"":jQuery(n).val()}),i.previewer.send("update-inline-typography-css",t),JSON.stringify(t.data)},e}();t.EpsilonTypography=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(21);wp.customize.controlConstructor["epsilon-color-scheme"]=wp.customize.Control.extend({ready:function(){var e=this;wp.customize.bind("ready",function(){new n.EpsilonColorSchemes(e)}),e.container.on("change",".epsilon-color-scheme-input",function(t){e.setting.set(jQuery(t.target).val())})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.loading=!1,this.requests=0,this.requestsIndex=0,this.control=e,this.context=this.control.container.find(".epsilon-color-scheme"),this.panel=this.control.container.parent(),this.panel.addClass("epsilon-is-loadable"),this.context.length&&(this.init(),wp.customize.previewer.bind("epsilon-set-color-schemes-loading",function(e){t.stateChanger(!1)}))}return e.prototype.stateChanger=function(e){e?this.startLoading():this.stopLoading()},e.prototype.startLoading=function(){this.loading||(this.loading=!0,this.panel.addClass("epsilon-loading"))},e.prototype.stopLoading=function(){var e=this;this.requestsIndex+=1,this.requests===this.requestsIndex&&setTimeout(function(){e.loading=!1,e.panel.removeClass("epsilon-loading"),e.requests=0,e.requestsIndex=0},350)},e.prototype.init=function(){var e=this,t=this.context.find(".epsilon-color-scheme-option"),i=this.context.parent().find("[data-customize-setting-link]").first(),n=JSON.parse(t.first().find("input").val()),o=wp.customize,s=[],a={action:"epsilon_generate_color_scheme_css",class:"Epsilon_Color_Scheme",id:"",data:{}};jQuery.each(n,function(e,t){s.push(e.toString())}),_.each(s,function(t){a.data[t]=o(t)(),void 0!==o.control(t)&&o.control(t).container.on("change","input.epsilon-color-picker",_.debounce(function(){e.stateChanger(!0),e.context.siblings(".epsilon-color-scheme-selected").find(".epsilon-color-scheme-palette").find('*[data-field-id="'+t+'"]').css("background",jQuery(this).attr("value")),a.data[t]=o(t)(),e.requests+=1,o.previewer.send("update-inline-color-schemes-css",a)},250))}),t.on("click",function(){var t=jQuery(this).attr("data-color-id"),n=jQuery(this).find("input").val();n&&(n=JSON.parse(n)),jQuery.each(n,function(t,i){jQuery("#customize-control-"+String(t)+"-epsilon-color-picker").minicolors("value",i),o(t).set(i),e.context.siblings(".epsilon-color-scheme-selected").find(".epsilon-color-scheme-palette").find('*[data-field-id="'+String(t)+'"]').css("background",i)}),jQuery(this).siblings(".epsilon-color-scheme-option").removeClass("selected"),jQuery(this).addClass("selected"),i.val(t).trigger("change")}),jQuery(".epsilon-control-dropdown").on("click",function(){jQuery(this).toggleClass("active"),jQuery(this).find("span").toggleClass("dashicons-arrow-down dashicons-arrow-up"),e.context.slideToggle()})},e}();t.EpsilonColorSchemes=n},function(e,t){wp.customize.controlConstructor["epsilon-upsell"]=wp.customize.Control.extend({ready:function(){var e=this;e.container.on("click",".epsilon-upsell-label",function(t){t.preventDefault(),jQuery(this).toggleClass("opened").find("i").toggleClass("dashicons-arrow-down-alt2 dashicons-arrow-up-alt2"),e.container.find(".epsilon-upsell-container").slideToggle(200)})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(24);wp.customize.controlConstructor["epsilon-layouts"]=wp.customize.Control.extend({ready:function(){var e=this;new n.EpsilonLayouts(e),e.container.on("change","input",function(t){e.setting.set(jQuery(t.target).val())})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.html={buttonLeft:'<a href="#" data-action="left"><span class="dashicons dashicons-arrow-left"></span> </a>',buttonRight:'<a href="#" data-action="right"><span class="dashicons dashicons-arrow-right"></span> </a>'},this.activeColumns=null,this.colClasses="col12 col11 col10 col9 col8 col7 col6 col5 col4 col3 col2 col1",this.control=e,this.context=this.control.container,this.layoutButtons=this.context.find(".epsilon-control-group > a"),this.resizeButtons=this.context.find(".epsilon-layouts-setup > .epsilon-column > a"),this.maxColumns=this.layoutButtons.length,this.minSpan=parseFloat(this.control.params.minSpan),this.lastColumnsState=null,this.dataLink=this.context.find("[data-customize-setting-link]").first(),this.handle_actions(),this.context.on("epsilon_column_count_changed epsilon_column_size_changed",this._save)}return e.prototype.handle_actions=function(){this._advanced_toggler(),this._column_resize(),this._column_recount(),this._layout_select(),this._equalize_columns()},e.prototype._advanced_toggler=function(){this.context.on("click",".epsilon-control-advanced",function(e){e.preventDefault(),jQuery(this).toggleClass("active"),jQuery("#"+jQuery(this).attr("data-unique-id")).slideToggle().addClass("active")})},e.prototype._column_resize=function(){var e,t,i,n=this;this.context.on("click",".epsilon-column > a",function(o){i=jQuery(this).parent(),e=i.index(),t="right"===jQuery(this).attr("data-action")?n.context.find(".epsilon-layouts-setup > .epsilon-column").eq(e+1):n.context.find(".epsilon-layouts-setup > .epsilon-column").eq(e-1),n._calc_column_resize(t,i)})},e.prototype._column_recount=function(){var e,t,i,n=this;this.context.on("epsilon_column_count_change",function(o){if(n.activeColumns=parseFloat(o.columns.selected),n.lastColumnsState=o.columns.beforeSelection,n.activeColumns!==n.lastColumnsState){if(1===n.activeColumns){(a=n.context.find(".epsilon-control-set-advanced")).removeClass("epsilon-control-set-advanced").addClass("epsilon-control-set"),a.find(".epsilon-control-advanced").fadeOut(),n.context.find(".epsilon-control-advanced").removeClass("active");var s=n.context.find(".epsilon-control-advanced").attr("data-unique-id");n.context.find("#"+s).slideUp().removeClass("active")}else{var a;(a=n.context.find(".epsilon-control-set")).removeClass("epsilon-control-set").addClass("epsilon-control-set-advanced"),a.find(".epsilon-control-advanced").fadeIn()}if(e=n.lastColumnsState<n.activeColumns?"adding":"subtracting",t=n.activeColumns-n.lastColumnsState,"subtracting"===e)n.context.find(".epsilon-layouts-setup > .epsilon-column").slice(-(n.lastColumnsState-n.activeColumns)).remove();else for(i=0;i<t;i++)n.context.find(".epsilon-layouts-setup").append('<div class="epsilon-column col4">'+n.html.buttonLeft+n.html.buttonRight+"</div>");n.context.trigger({type:"epsilon_column_count_changed",instance:n})}})},e.prototype._layout_select=function(){var e=this;this.layoutButtons.on("click",function(t){t.preventDefault();var i=jQuery(this).attr("data-button-value");e.context.trigger({type:"epsilon_column_count_change",columns:{selected:parseFloat(i),beforeSelection:e.context.find(".epsilon-layouts-setup > .epsilon-column").length}}),jQuery(this).addClass("active").siblings("a").removeClass("active")})},e.prototype._equalize_columns=function(){var e=this;this.context.on("epsilon_column_count_changed",function(t){switch(e.activeColumns){case 2:e.context.find(".epsilon-column").removeClass(e.colClasses),e.context.find(".epsilon-column").first().addClass("col8").attr("data-columns",8),e.context.find(".epsilon-column").last().addClass("col4").attr("data-columns",4);break;default:if(null===e.activeColumns)return;e.context.find(".epsilon-column").removeClass(e.colClasses).addClass("col"+12/e.activeColumns).attr("data-columns",12/e.activeColumns)}})},e.prototype._calc_column_resize=function(e,t){var i,n=e.attr("data-columns");void 0!==n&&(n=parseFloat(n),parseFloat(n)!==this.minSpan&&(i=t.attr("data-columns"),i=parseFloat(i),e.attr("data-columns",n-1).removeClass(this.colClasses).addClass("col"+(n-1)),t.attr("data-columns",i+1).removeClass(this.colClasses).addClass("col"+(i+1)),this.context.trigger({type:"epsilon_column_size_changed",instance:this})))},e.prototype._save=function(e){var t={columnsCount:e.instance.activeColumns,columns:{}};jQuery.each(e.instance.context.find(".epsilon-column"),function(e){var i=jQuery(this).attr("data-columns");if(void 0!==i){var n={index:e+1,span:i=parseFloat(i)};t.columns[e+1]=n}}),null===t.columnsCount&&(t.columnsCount=e.instance.context.find(".epsilon-column").length),e.instance.dataLink.val(JSON.stringify(t)).trigger("change")},e}();t.EpsilonLayouts=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(26);wp.customize.controlConstructor["epsilon-repeater"]=wp.customize.Control.extend({ready:function(){new n.EpsilonFieldRepeater(this)}})},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(27),s=i(37),a=i(38),r=i(39),c=function(){function e(e){this.$actions=n({},o.default),this.$events=n({},s.default),this.$utils=n({},a.default),this.$connectors=n({},r.default),this.state={loading:!0,addingRow:!1,currentIndex:0,sorting:!1,rows:[]},this.$_instance=e,this.$ID=this.$_instance.params.id,this.repeaterContainer=this.$_instance.container.find(".repeater-fields"),this.template=this.$utils.repeaterTemplate(),this.loading=!1,this._bindFunctions(),this._createExistingRows(),this._eventListener(),this._initSorting()}return Object.defineProperty(e.prototype,"loading",{get:function(){return this.state.loading},set:function(e){this.state.loading=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorting",{get:function(){return this.state.sorting},set:function(e){switch(this.state.sorting=e,this.state.sorting){case!0:this.state.rows.map(function(e){e.forceMinimize(),e.sorting=!0}),this.repeaterContainer.addClass("epsilon-repeater-is-sorting");break;default:this.state.rows.map(function(e){return e.sorting=!1}),this.repeaterContainer.removeClass("epsilon-repeater-is-sorting")}},enumerable:!0,configurable:!0}),e.prototype._bindFunctions=function(){this.$connectors.setValue=this.$connectors.setValue.bind(this),this.$connectors.getValue=this.$connectors.getValue.bind(this),this.$connectors.addNewRow=this.$connectors.addNewRow.bind(this),this.$actions.addRow=this.$actions.addRow.bind(this),this.$actions.removeRow=this.$actions.removeRow.bind(this),this.$actions.sortRows=this.$actions.sortRows.bind(this)},e.prototype._createExistingRows=function(){var e=this;this.loading=!0,this.$_instance.params.value.map(function(t){e.$actions.addRow(t)}),this.loading=!1},e.prototype._eventListener=function(){this.$events.addRowButton.call(this),this.$events.handleFieldDeletion.call(this)},e.prototype._initSorting=function(){var e=this;this.repeaterContainer.parent().on("click",".epsilon-sort-rows",function(){switch(e.sorting=!e.sorting,e.sorting){case!0:e.repeaterContainer.sortable({handle:".repeater-row-header",axis:"y",distance:15,stop:function(t,i){return e.$actions.sortRows(t,i)}});break;default:e.repeaterContainer.sortable("destroy")}})},e}();t.EpsilonFieldRepeater=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(28);t.default={addRow:function(e){var t,i=_.memoize(this.template);if(!i)return!1;if(t=this.$utils.mergeData.call(this),(t=this.$utils.setTemplateDefaults(t,e)).index=this.state.currentIndex,this.state.currentIndex+=1,!e)for(var o in t)void 0!==t[o].default&&(t[o].default=t[o].randomize?t[o].default+" "+this.state.currentIndex:t[o].default);if(i=i(t),this.state.rows.push(new n.EpsilonRepeaterRow(this,jQuery(i).appendTo(this.repeaterContainer),t)),!e&&(this.$connectors.addNewRow(this.$utils.pluckValues(t)),this.$_instance.params.selective_refresh)){var s=this.$utils.decideWhereWeAre(this);wp.customize.previewer.send("updated-field-repeater",{control:this.$ID,sectionIndex:s.sectionIndex,postId:s.postId,controlId:s.controlId})}return this.state.rows[t.index]},removeRow:function(e){this.loading=!0,this.state.rows.splice(e.index,1);var t=this.$connectors.getValue();if(t=t.filter(function(t){return e.index!==t.index}),t=this.$utils.resetIndexes.call(this,t),this.$connectors.setValue(t),this.loading=!1,this.state.currentIndex=this.state.rows.length,this.$_instance.params.selective_refresh){var i=this.$utils.decideWhereWeAre(this);wp.customize.previewer.send("updated-field-repeater",{control:this.$ID,sectionIndex:i.sectionIndex,postId:i.postId,controlId:i.controlId})}return e.index},sortRows:function(e,t){var i=this;t.item.trigger("epsilon-changed-position");var n=0;this.repeaterContainer.find(".repeater-row").map(function(e,t){jQuery(t).attr("data-row",n),n++}),this.state.rows.map(function(e){return e.forceResetIndex()});var o=this.$connectors.getValue();if(o.map(function(e,t){o[t].index=i.state.rows[t].index}),this.state.rows=_.sortBy(this.state.rows,function(e){return e.index}),o=_.sortBy(o,function(e){return e.index}),this.repeaterContainer.trigger("row:stopped-sorting",{rows:this.state.rows}),this.$connectors.setValue(o),this.$_instance.params.selective_refresh){var s=this.$utils.decideWhereWeAre(this);wp.customize.previewer.send("updated-field-repeater",{control:this.$ID,sectionIndex:s.sectionIndex,postId:s.postId,controlId:s.controlId})}}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(29),s=function(){function e(e,t,i){this._state={loading:!1,updatingValues:!1,toggled:!1,sorting:!1},this.initiated=[],this.externalInits={selectize:"RepeaterSelectize",epsilon_text_editor:"RepeaterEditor",epsilon_color_picker:"RepeaterColorPicker",epsilon_image:"RepeaterImage",epsilon_slider:"RepeaterSlider",epsilon_button_group:"RepeaterButtonGroup",epsilon_icon_picker:"RepeaterIconPicker",epsilon_video:"RepeaterVideo"},this.data=i,this.index=i.index,this.$ID=e.$ID,this.container=t,this.header=this.container.find(".repeater-row-header"),this.content=this.container.find(".repeater-row-content"),this.footer=this.container.find(".repeater-row-footer"),this.label=""+e.$utils.getLabel(e,t),this.initiateExternalLibraries(),this.handleEvents(e),this.handleConditionalFields(),this.container.trigger("row:added-repeater-field",this.data)}return Object.defineProperty(e.prototype,"loading",{get:function(){return this._state.loading},set:function(e){switch(this._state.loading=e,this._state.loading){case!0:this.container.addClass("epsilon-section-is-loading");break;default:this.container.removeClass("epsilon-section-is-loading")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggled",{get:function(){return this._state.toggled},set:function(e){this._state.toggled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorting",{get:function(){return this._state.sorting},set:function(e){this._state.sorting=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e,this.header.find(".repeater-row-label").text(this.label)},enumerable:!0,configurable:!0}),e.prototype.initiateExternalLibraries=function(){var e=this.externalInits,t=[];_.each(this.data,function(i){if(void 0!==i.id&&void 0!==i.type&&"text"!==i.type&&"hidden"!==i.type&&"select"!==i.type&&"epsilon-toggle"!==i.type){var n=i.type.replace(/-/g,"_");t.push({id:i.id,type:n,init:e.hasOwnProperty(n)?e[n]:"unknown"})}}),this.externalLibs=_.chain(t).groupBy("type").map(function(e,t){return{elements:e,type:t}}).value()},e.prototype.constructExternal=function(){var e=this;this.externalLibs.map(function(t){var i=e.externalInits[t.type];void 0!==i&&e._constructExternal(t,i)}),this.toggled=!0},e.prototype._constructExternal=function(e,t){var i=this;e.elements.map(function(s,a){var r=n({},s,{mainId:i.$ID,container:i.container});switch(t){case"RepeaterEditor":i.initiated.push(new o.RepeaterEditor(r));break;case"RepeaterSelectize":i.initiated.push(new o.RepeaterSelectize(r));break;case"RepeaterColorPicker":i.initiated.push(new o.RepeaterColorPicker(r));break;case"RepeaterImage":i.initiated.push(new o.RepeaterImage(n({},r,{allSizes:i.data[r.id].sizeArray})));break;case"RepeaterVideo":i.initiated.push(new o.RepeaterVideo(r));break;case"RepeaterSlider":i.initiated.push(new o.RepeaterSlider(n({},r,i.data[r.id].choices,{value:i.data[r.id].default})));break;case"RepeaterButtonGroup":i.initiated.push(new o.RepeaterButtonGroup(r));break;case"RepeaterIconPicker":i.initiated.push(new o.RepeaterIconPicker(n({},r,{icons:i.data[r.id].icons})))}e.elements.length===a+1&&setTimeout(function(){return i.loading=!1},300)})},e.prototype.minimizeToggle=function(){var e=this;this.sorting||(this.toggled||this.constructExternal(),this.content.slideToggle(300,function(){e.container.toggleClass("minimized"),e.header.find(".dashicons:not(.repeater-row-remove):not(.repeater-row-hide)").toggleClass("dashicons-arrow-up-alt2").toggleClass("dashicons-arrow-down-alt2")}))},e.prototype.handleEvents=function(e){this.minimizeEvent(),this.removeEvent(e),this.updateEvent(e)},e.prototype.minimizeEvent=function(){var e=this;this.header.on("click",function(t){jQuery(t.target).is(".repeater-row-hide")||jQuery(t.target).hasClass("epsilon-section-hidden")||e.minimizeToggle()})},e.prototype.removeEvent=function(e){var t=this;this.container.on("click",".repeater-row-remove",function(){t.container.slideUp(300,function(){return t.container.detach()}),t.container.trigger("row:deleted-repeater-field",{index:t.index}),e.$actions.removeRow(t)})},e.prototype.updateEvent=function(e){var t=this;this.container.on("keyup change","input, select, textarea, checkbox",function(i){var n=e.$connectors.getValue(),o=jQuery(i.target).attr("type");switch(void 0===o&&jQuery(i.target).is("select")&&jQuery(i.target).attr("multiple")&&(o="multiple-select"),o){case"checkbox":case"epsilon-toggle":n[t.index][jQuery(i.target).data("field")]=jQuery(i.target).prop("checked");break;case"multiple-select":var s=jQuery(i.target)[0];n[t.index][jQuery(i.target).data("field")]=s.selectize.getValue();break;default:n[t.index][jQuery(i.target).data("field")]=i.target.value,t.container.trigger("row:updated-text-field",{id:jQuery(i.target).attr("data-field"),value:i.target.value,index:t.index})}if(t.label=""+e.$utils.getLabel(e,t.container),e.$_instance.params.selective_refresh){var a=e.$utils.decideWhereWeAre(e);wp.customize.previewer.send("updated-field-repeater",{control:t.$ID,sectionIndex:a.sectionIndex,postId:a.postId,controlId:a.controlId,value:n[t.index]})}e.$connectors.setValue(n)})},e.prototype.forceMinimize=function(){var e=this;this.content.slideUp(300,function(){e.container.addClass("minimized"),e.header.find(".dashicons:not(.repeater-row-remove):not(.repeater-row-hide)").addClass("dashicons-arrow-down-alt2").removeClass("dashicons-arrow-up-alt2")})},e.prototype.forceResetIndex=function(){this.index=parseFloat(this.container.attr("data-row"))},e.prototype.handleConditionalFields=function(){new o.ConditionalFields(this.data,this.container)},e}();t.EpsilonRepeaterRow=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(30);t.RepeaterEditor=n.default;var o=i(2);t.RepeaterSelectize=o.default;var s=i(31);t.RepeaterColorPicker=s.default;var a=i(32);t.RepeaterImage=a.default;var r=i(33);t.RepeaterVideo=r.default;var c=i(34);t.RepeaterSlider=c.default;var l=i(35);t.RepeaterButtonGroup=l.default;var u=i(36);t.RepeaterIconPicker=u.default;var d=i(3);t.ConditionalFields=d.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.props=e,this.props.container.on("epsilon-changed-position",function(){return t._destroyAndInit()}),this.init()}return e.prototype.init=function(){this.id=this.props.container.find('[data-field="'+this.props.id+'"]').attr("id"),wp.editor.initialize(this.id,{tinymce:{wpautop:!0,browser_spellcheck:!0,mediaButtons:!1,wp_autoresize_on:!0,toolbar1:"link numlist bullist forecolor backcolor bold italic underline",setup:function(e){e.on("change",function(t){e.save(),jQuery(e.getElement()).trigger("change")})}},quicktags:!0})},e.prototype.destroy=function(){wp.editor.remove(this.id)},e.prototype._destroyAndInit=function(){this.destroy(),this.init()},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){var e=this.props.container.find('[data-field="'+this.props.id+'"]'),t={changeDelay:500,theme:"default",change:this.changePallete,format:"rgb",opacity:!0};"function"==typeof jQuery.fn.minicolors&&(""!==e.attr("placeholder")&&(e.defaultValue=e.attr("placeholder")),e.minicolors(t),e.parents(".repeater-field-epsilon-color-picker").find("a").on("click",function(e){e.preventDefault();var t=jQuery(e.target).parents(".repeater-field-epsilon-color-picker").find("input.epsilon-color-picker");t.minicolors("value",jQuery(e.target).attr("data-default")),t.trigger("change")}))},e.prototype.changePallete=function(e,t){jQuery(".epsilon-color-scheme-selected").find('*[data-field-id="'+jQuery(this).attr("data-customize-setting-link")+'"]').css("background-color",e)},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e){this.props=e,this.allSizes=this.props.allSizes,this.init()}return e.prototype.init=function(){var e=this;this.container=this.props.container.find('[data-field="'+this.props.id+'"]').parents(".epsilon-controller-image-container"),this.container.on("click keypress",".placeholder, .epsilon-image, .image-replace-button",function(t){t.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(t)||e._imageUpload()}),this.container.on("click keypress",".image-remove-button",function(t){t.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(t)||e._imageRemoval()})},e.prototype._imageUpload=function(){var e=this,t=wp.media({multiple:!1}).open(),i='<option value="full">Full</option>';for(var n in this.allSizes)i+='<option value="'+n+'">'+n+"</option>";jQuery(t.el).find(".media-frame-toolbar > .media-toolbar").append('<label>\n            <select id="epsilon-image-size-selector">\n               '+i+"\n            </select>\n        </label>"),jQuery("#epsilon-image-size-selector").val(this.container.find("input").attr("data-size")),t.on("select",function(){var i,n=e.container.find("input"),o=t.state().get("selection").first(),s=jQuery("#epsilon-image-size-selector").val(),a={id:null,url:""};void 0===o.toJSON().sizes[s]&&(s="full"),a.id=o.id,a.url=o.toJSON().sizes[s].url,i="url"===n.attr("data-save-mode")?a.url:a.id,n.val(i),e._setImage(a.url),e.container.find(".actions .image-replace-button").show(),e.container.find(".actions .image-remove-button").show(),jQuery("#epsilon-image-size-selector").detach()})},e.prototype._imageRemoval=function(){var e=this,t=this.container.find(".epsilon-image");t.length&&t.find("img").fadeOut(200,function(){var i,o=EpsilonTranslations.selectFile+'<span class="recommended-size"></span>',s={action:["Epsilon_Helper","get_image_sizes"],nonce:EpsilonWPUrls.ajax_nonce,args:[]},a=e.container.find("input").attr("data-size");t.removeClass("epsilon-image").addClass("placeholder").html(o),(i=new n.EpsilonAjaxRequest(s)).request(),jQuery(i).on("epsilon-received-success",function(e){_.isUndefined(i.result[a])||t.find(".recommended-size").text(i.result[a].width+" x "+i.result[a].height)})}),this.container.find(".actions .image-replace-button").hide(),this.container.find(".actions .image-remove-button").hide(),this.container.find("input").attr("value","").trigger("change")},e.prototype._setImage=function(e){var t=this.container.find(".epsilon-image").length?this.container.find(".epsilon-image"):this.container.find(".placeholder");t.length&&(t.removeClass("epsilon-image placeholder").addClass("epsilon-image"),t.html(""),t.append('<img style="display:none" src="'+e+'" />'),t.find("img").fadeIn(200)),this.container.find("input").trigger("change")},e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){var e=this;this.container=this.props.container.find('[data-field="'+this.props.id+'"]').parents(".epsilon-controller-video-container"),this.container.on("click keypress",".video-upload-button",function(t){t.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(t)||e._videoUpload()}),this.container.on("click keypress",".video-upload-remove-button",function(t){t.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(t)||e._videoRemoval()})},e.prototype._videoUpload=function(){var e=this,t=wp.media({multiple:!1,library:{type:"video"}}).open();t.on("select",function(){var i=e.container.find("input"),n=t.state().get("selection").first(),o={url:null,label:null};n=n.toJSON(),o.url=n.url,o.label=n.filename,i.val(JSON.stringify(o)),e._setVideo(n),e.container.find(".actions .video-upload-remove-button").show()})},e.prototype._videoRemoval=function(){this.container.find(".epsilon-video");this.container.find(".actions .video-upload-remove-button").hide(),this.container.find("input").attr("value","").trigger("change"),this._setVideo({filename:EpsilonTranslations.selectVideo})},e.prototype._setVideo=function(e){var t=this.container.find(".epsilon-video").length?this.container.find(".epsilon-video"):this.container.find(".placeholder");t.length&&(t.removeClass("epsilon-video placeholder").addClass("epsilon-video"),t.html(""),t.append("<span>"+e.filename+"</span>")),this.container.find("input").trigger("change")},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){var e=this.props.container.find('[data-field="'+this.props.id+'"]');this.props.container=e.parent();var t=this.props.container.find(".ss-slider"),i=e.attr("id"),n=t.attr("id"),o=jQuery("#"+n);o.slider({value:this.props.value,range:"min",min:this.props.min,max:this.props.max,step:this.props.step,slide:function(e,t){jQuery("#"+i).attr("value",t.value)},stop:function(e,t){jQuery("#"+i).trigger("change")}}),jQuery(e).on("focus",function(){jQuery(this).trigger("blur")}),jQuery("#"+i).attr("value",o.slider("value"))},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){this.props.container.find('[data-field="'+this.props.id+'"]').parent().on("click","a",function(e){e.preventDefault();var t=jQuery(e.target).attr("data-value");jQuery(e.target).siblings().removeClass("active"),jQuery(e.target).addClass("active"),jQuery(e.target).parent().find("input").val(t).trigger("change")})},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){this.props.container.find('[data-field="'+this.props.id+'"]').fontIconPicker({source:EpsilonIconPack})},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={addRowButton:function(){var e=this;this.$_instance.container.find("button.epsilon-repeater-add").on("click keydown",function(t){t.preventDefault(),e.$actions.addRow(!1)})},deleteRowButton:function(){},handleFieldDeletion:function(){var e=this;wp.customize.previewer.bind("epsilon-refresh-page",function(e){wp.customize.previewer.refresh()}),wp.customize.previewer.bind("epsilon-field-repeater-delete",function(t){e.$ID===t.control&&e.state.rows[t.index].container.slideUp(300,function(){e.state.rows[t.index].container.detach(),e.$actions.removeRow(e.state.rows[t.index]),e.repeaterContainer.find(".repeater-row").map(function(e,t){jQuery(t).attr("data-row",e),console.log(e)}),e.state.rows.map(function(e){return e.forceResetIndex()})})})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={resetIndexes:function(e){return this.state.rows.map(function(e,t){e.index=t}),e.map(function(e,t){e.index=t}),e},mergeData:function(){return jQuery.extend(!0,{},this.$_instance.params.fields)},setTemplateDefaults:function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(e[i].default=t[i]);return e},repeaterTemplate:function(){return function(e){return _.template(jQuery(".customize-control-epsilon-repeater-content-field").html(),null,{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"})(e)}},pluckValues:function(e){var t={index:e.index};return _.each(e,function(e){if(!e.hasOwnProperty("id"))return!1;t[e.id]=e.default}),t},getLabel:function(e,t){return"field"===e.$_instance.params.rowLabel.type?this._getLabelByField(e.$_instance.params.rowLabel.field,t,e):e.$_instance.params.rowLabel.value},_getLabelByField:function(e,t,i){var n=t.find('.repeater-field [data-field="'+e+'"]'),o="";switch(n.attr("type")){case"select":o=i.$_instance.params.fields(e).choices[n.val()];break;default:o=n.val()}return o},decideWhereWeAre:function(e){var t=jQuery(".customize-control-epsilon-section-repeater"),i=t.attr("id");i=(i=(i=(i=i.replace("customize-","")).replace("control-","")).replace("-","_")).split("_");var n=parseInt(i[i.length-1]),o=i.join("_");return{sectionIndex:t.find(".repeater-row:not(.minimized)").attr("data-row"),postId:n,controlId:o}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={setValue:function(e){this.$_instance.setting.set([]),this.$_instance.setting.set(e)},getValue:function(){return this.$_instance.setting.get()},addNewRow:function(e){var t=this.$connectors.getValue();t.push(e),this.$connectors.setValue(t)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(41);wp.customize.controlConstructor["epsilon-section-repeater"]=wp.customize.Control.extend({ready:function(){var e=this,t=jQuery(this.container).attr("id"),i=document.getElementById(t),o=new MutationObserver(function(t){var i=t[t.length-1];jQuery(i.target).is(":visible")&&!jQuery(i.target).hasClass("epsilon-section-repeater-initiated")&&(jQuery(i.target).addClass("epsilon-section-repeater-initiated"),new n.EpsilonSectionRepeater(e))});this.container.is(":visible")&&(this.container.addClass("epsilon-section-repeater-initiated"),new n.EpsilonSectionRepeater(e)),null!==i&&o.observe(i,{attributes:!0,childList:!1,attributeFilter:["style"]})}})},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(42),s=i(43),a=i(44),r=i(57),c=i(58),l=function(){function e(e){this.$actions=n({},a.default),this.$events=n({},o.default,s.default),this.$utils=n({},r.default),this.$connectors=n({},c.default),this.state={loading:!0,addingSection:!1,importingSection:!1,currentIndex:0,sorting:!1,rows:[]},this.$_instance=e,this.$ID=this.$_instance.params.id,this.repeaterContainer=this.$_instance.container.find(".repeater-sections"),this.template=this.$utils.repeaterTemplate(),this.loading=!1,this._bindFunctions(),this._createExistingSections(),this._layoutReconstruct(),this._eventListener(),this._initSearch(),this._initSorting()}return Object.defineProperty(e.prototype,"loading",{get:function(){return this.state.loading},set:function(e){switch(this.state.loading=e,this.state.loading){case!0:this.repeaterContainer.addClass("epsilon-section-repeater-is-loading");break;default:this.repeaterContainer.removeClass("epsilon-section-repeater-is-loading")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorting",{get:function(){return this.state.sorting},set:function(e){switch(this.state.sorting=e,this.state.sorting){case!0:this.state.rows.map(function(e){e.forceMinimize(),e.sorting=!0}),this.repeaterContainer.addClass("epsilon-section-repeater-is-sorting");break;default:this.state.rows.map(function(e){return e.sorting=!1}),this.repeaterContainer.removeClass("epsilon-section-repeater-is-sorting")}},enumerable:!0,configurable:!0}),e.prototype._bindFunctions=function(){this.$connectors.setValue=this.$connectors.setValue.bind(this),this.$connectors.getValue=this.$connectors.getValue.bind(this),this.$connectors.addNewSection=this.$connectors.addNewSection.bind(this),this.$actions.addSection=this.$actions.addSection.bind(this),this.$actions.removeSection=this.$actions.removeSection.bind(this),this.$actions.sortSections=this.$actions.sortSections.bind(this)},e.prototype._createExistingSections=function(){var e=this;this.loading=!0,this.$_instance.params.value.map(function(t){e.$actions.addSection(t)}),this.loading=!1},e.prototype._layoutReconstruct=function(){this.$utils.moveElements.call(this),this.availableSections=jQuery("#sections-left-"+this.$ID).find(".available-sections"),this.importableSections=jQuery("#importable-sections-"+this.$ID).find(".available-sections")},e.prototype._eventListener=function(){this.$events.closeOnCustomizerBack.call(this),this.$events.addMoreSectionButton.call(this),this.$events.importSectionButton.call(this),this.$events.addSectionButton.call(this),this.$events.importSections.call(this),this.$events.handleSectionDescription.call(this),this.$events.handleIntegrationEvent.call(this),this.$events.handleNavigation.call(this),this.$events.handleNavigationToFieldRepeater.call(this)},e.prototype._initSearch=function(){var e=this;jQuery("#sections-left-"+this.$ID).find(".sections-search-input").on("keyup change",_.debounce(function(t){var i=t.target.value;void 0!==i&&(i=i.toLowerCase()),jQuery("#sections-left-"+e.$ID).find(".epsilon-section").map(function(e,t){var n=jQuery(t).attr("data-id");void 0!==n&&(n=n.toLowerCase()),jQuery(t)[-1!==n.indexOf(i)?"show":"hide"]()})},500))},e.prototype._initSorting=function(){var e=this;this.repeaterContainer.parent().on("click",".epsilon-sort-sections",function(){switch(e.sorting=!e.sorting,e.sorting){case!0:e.repeaterContainer.sortable({handle:".repeater-row-header",axis:"y",distance:15,stop:function(t,i){return e.$actions.sortSections(t,i)}});break;default:e.repeaterContainer.sortable("destroy")}})},e}();t.EpsilonSectionRepeater=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={addSectionButton:function(){var e=this;this.availableSections.on("click",'.epsilon-section [data-action="add"]',function(t){t.preventDefault(),e.$actions.addSection({type:jQuery(t.target).parent().attr("data-id")}),jQuery("body").removeClass("adding-section"),jQuery("#sections-left-"+e.$ID).find(".available-sections").removeClass("opened"),e.$_instance.params.selective_refresh&&wp.customize.previewer.refresh()})},addMoreSectionButton:function(){var e=this;this.$_instance.container.find(".epsilon-add-new-section").on("click keydown",function(t){var i=jQuery("body");i.hasClass("adding-doubled-section")||(i.removeClass("importing-section"),i.toggleClass("adding-section"),e.importableSections.removeClass("opened"),e.availableSections.toggleClass("opened"),i.hasClass("adding-section")&&!jQuery(t.target).is(".epsilon-add-new-section")&&e.$_instance.control.close())})},importSectionButton:function(){var e=this;this.$_instance.container.find(".epsilon-import-sections").on("click keydown",function(t){var i=jQuery("body");i.hasClass("adding-doubled-section")||(i.removeClass("importing-section"),i.toggleClass("adding-section"),e.availableSections.removeClass("opened"),e.importableSections.toggleClass("opened"),i.hasClass("importing-section")&&!jQuery(t.target).is(".epsilon-import-sections")&&e.$_instance.control.close())})},importSections:function(){var e=this;this.importableSections.on("click",".epsilon-sections-import",function(t){t.preventDefault();var i=jQuery("body"),n=jQuery(t.target).attr("data-import");e.$_instance.params.hasOwnProperty("importable")&&e.$_instance.params.importable.hasOwnProperty(n)&&e.$_instance.params.importable[n].sections.map(function(t){t.imported=!0,e.$actions.addSection(t)}),i.removeClass("importing-section"),i.removeClass("adding-section"),e.availableSections.removeClass("opened"),e.importableSections.toggleClass("opened")})},closeOnCustomizerBack:function(){var e=this;wp.customize.section(this.$_instance.params.section,function(t){t.container.find(".accordion-section-title, .customize-section-back").on("click keydown",function(t){if(!wp.customize.utils.isKeydownButNotEnterEvent(t)){e.state.rows.map(function(e){e.container.hasClass("minimized")||e.minimizeToggle()});var i=jQuery("body");i.removeClass("adding-section importing-section"),i.find(".doubled-section-opened").removeClass("doubled-section-opened"),e.availableSections.removeClass("opened"),e.importableSections.removeClass("opened")}})})},handleIntegrationEvent:function(){this.$_instance.params.integrations&&jQuery("#sections-left-"+this.$ID).on("click",".available-sections-tab-toggler",function(e){e.preventDefault();var t,i=jQuery(e.target).attr("data-tab");jQuery(e.target).siblings().removeClass("active"),jQuery(e.target).addClass("active"),void 0!==i&&((t=jQuery('[data-tab-id="'+i+'"]')).siblings("div").removeClass("active").slideUp(),t.slideDown().addClass("active"))})},handleSectionDescription:function(){jQuery("#sections-left-"+this.$_instance.params.id).on("click",'.epsilon-section [data-action="info"]',function(e){e.preventDefault(),jQuery(e.target).parent().find(".epsilon-section-image-description").toggleClass("active"),jQuery(e.target).parent().find(".epsilon-section-description").toggleClass("active")})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={handleNavigation:function(){var e=this;wp.customize.previewer.bind("epsilon-section-edit",function(t){void 0!==wp.customize.section(t.customizerSection)&&("delete"===t.sectionTab?e.$events._deleteSection.call(e,t):e.$events._focusSection.call(e,t))})},_focusSection:function(e){this.state.rows.map(function(t){t.container.hasClass("minimized")||t.index==e.section||t.minimizeToggle()}),wp.customize.section(e.customizerSection).focus(),!_.isUndefined(this.state.rows[e.section])&&this.state.rows[e.section].container.hasClass("minimized")&&this.state.rows[e.section].minimizeToggle(),"string"==typeof e.sectionTab&&this.state.rows[e.section].container.find("nav").find("a[data-item="+e.sectionTab+"]").trigger("click")},_deleteSection:function(e){var t=this;this.state.rows[e.section].container.slideUp(300,function(){t.state.rows[e.section].container.detach(),t.$actions.removeSection(t.state.rows[e.section])})},handleNavigationToFieldRepeater:function(){var e=this;wp.customize.previewer.bind("epsilon-field-repeater-edit",function(t){if(void 0!==wp.customize.section(t.customizerSection)&&void 0!==wp.customize.section(t.doubledSection)){var i=wp.customize.control(t.control),n=wp.customize.section(t.doubledSection);e.state.rows.map(function(e){e.container.hasClass("minimized")||e.index==t.section||e.minimizeToggle()}),wp.customize.section(t.customizerSection).focus(),!_.isUndefined(e.state.rows[t.section])&&e.state.rows[t.section].container.hasClass("minimized")&&e.state.rows[t.section].minimizeToggle(),jQuery("body").hasClass("adding-doubled-section")||setTimeout(function(e){n.headContainer.trigger("click")},400),i.container.find('.repeater-row:not(".minimized")').find(".repeater-row-header").trigger("click"),i.container.find(".repeater-row[data-row='"+parseFloat(t.field)+"']").find(".repeater-row-header").trigger("click")}})}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(45);t.default={addSection:function(e){var t,i=_.memoize(this.template);return!!i&&(void 0!==this.$_instance.params.sections[e.type]&&(t=this.$utils.mergeData.call(this,e.type),(t=this.$utils.setTemplateDefaults(t,e)).index=this.state.currentIndex,this.state.currentIndex+=1,i=i(t),this.state.rows.push(new o.EpsilonSectionRepeaterRow(this,jQuery(i).appendTo(this.repeaterContainer),t,e.type)),1===_.size(e)&&e.hasOwnProperty("type")&&this.$connectors.addNewSection(this.$utils.pluckValues(n({},t,e))),e.hasOwnProperty("imported")&&this.$connectors.addNewSection(this.$utils.pluckValues(n({},e,t))),this.state.rows[t.index]))},removeSection:function(e){this.loading=!0,this.state.rows.splice(e.index,1);var t=this.$connectors.getValue();return t=t.filter(function(t){return e.index!==t.index}),t=this.$utils.resetIndexes.call(this,t),this.$connectors.setValue(t),this.loading=!1,this.state.currentIndex=this.state.rows.length,this.$_instance.params.selective_refresh&&wp.customize.previewer.refresh(),e.index},sortSections:function(e,t){var i=this;t.item.trigger("epsilon-changed-position");var n=0;this.repeaterContainer.find(".repeater-row").map(function(e,t){jQuery(t).attr("data-row",n),n++}),this.state.rows.map(function(e){return e.forceResetIndex()});var o=this.$connectors.getValue();o.map(function(e,t){o[t].index=i.state.rows[t].index}),this.state.rows=_.sortBy(this.state.rows,function(e){return e.index}),o=_.sortBy(o,function(e){return e.index}),this.$connectors.setValue(o),this.$_instance.params.selective_refresh&&wp.customize.previewer.refresh()}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(46),s=function(){function e(e,t,i,n){this.initiated=[],this._state={loading:!1,updatingValues:!1,toggled:!1,sorting:!1,isUpsell:!1},this.externalInits={selectize:"SectionRepeaterSelectize",epsilon_text_editor:"SectionRepeaterEditor",epsilon_code_editor:"SectionRepeaterCodeEditor",epsilon_color_picker:"SectionRepeaterColorPicker",epsilon_image:"SectionRepeaterImage",epsilon_customizer_navigation:"SectionRepeaterNavigation",epsilon_slider:"SectionRepeaterSlider",epsilon_button_group:"SectionRepeaterButtonGroup",epsilon_icon_picker:"SectionRepeaterIconPicker",epsilon_margins_paddings:"SectionRepeaterMarginsPaddings",epsilon_template_select:"SectionRepeaterButtonGroup",epsilon_video:"SectionRepeaterVideo"},this.data=i,this.index=i.index,this.type=n,this.$ID=e.$ID,this.container=t,this.header=this.container.find(".repeater-row-header"),this.content=this.container.find(".repeater-row-content"),this.footer=this.container.find(".repeater-row-footer"),this.label=e.$_instance.params.sections[this.type].title,this.isUpsell=e.$_instance.params.sections[this.type].upsell,this.loading=!0,this.initiateExternalLibraries(),this.handleVisibility(),this.addTabs(),this.handleEvents(e),this.handleConditionalFields()}return Object.defineProperty(e.prototype,"loading",{get:function(){return this._state.loading},set:function(e){switch(this._state.loading=e,this._state.loading){case!0:this.container.addClass("epsilon-section-is-loading");break;default:this.container.removeClass("epsilon-section-is-loading")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggled",{get:function(){return this._state.toggled},set:function(e){this._state.toggled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorting",{get:function(){return this._state.sorting},set:function(e){this._state.sorting=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e,this.header.find(".repeater-row-label").html(this._label)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUpsell",{get:function(){return this._state.isUpsell},set:function(e){this._state.isUpsell=e,this._state.isUpsell?this.container.addClass("epsilon-upsell-section"):this.container.removeClass("epsilon-upsell-section")},enumerable:!0,configurable:!0}),e.prototype._configureInits=function(){var e=this.externalInits,t=[];_.each(this.data,function(i){if(void 0!==i.id&&void 0!==i.type&&"text"!==i.type&&"hidden"!==i.type&&"select"!==i.type&&"epsilon-toggle"!==i.type){var n=i.type.replace(/-/g,"_");t.push({id:i.id,type:n,init:e.hasOwnProperty(n)?e[n]:"unknown"})}}),this.externalLibs=_.chain(t).groupBy("type").map(function(e,t){return{elements:e,type:t}}).value()},e.prototype.initiateExternalLibraries=function(){this._configureInits()},e.prototype.constructExternal=function(){var e=this;this.externalLibs.map(function(t){var i=e.externalInits[t.type];void 0!==i&&e._constructExternal(t,i)}),this.toggled=!0},e.prototype._constructExternal=function(e,t){var i=this;e.elements.map(function(s,a){var r=n({},s,{mainId:i.$ID,container:i.container});switch(i.data[r.id].hasOwnProperty("linking")&&(r=n({},r,{linking:i.data[r.id].linking})),t){case"SectionRepeaterEditor":i.initiated.push(new o.SectionRepeaterEditor(r));break;case"SectionRepeaterCodeEditor":i.initiated.push(new o.SectionRepeaterCodeEditor(r));break;case"SectionRepeaterSelectize":i.initiated.push(new o.SectionRepeaterSelectize(r));break;case"SectionRepeaterColorPicker":i.initiated.push(new o.SectionRepeaterColorPicker(n({},r,{mode:i.data[r.id].mode})));break;case"SectionRepeaterImage":i.initiated.push(new o.SectionRepeaterImage(n({},r,{allSizes:i.data[r.id].sizeArray})));break;case"SectionRepeaterVideo":i.initiated.push(new o.SectionRepeaterVideo(r));break;case"SectionRepeaterNavigation":i.initiated.push(new o.SectionRepeaterNavigation(r));break;case"SectionRepeaterSlider":i.initiated.push(new o.SectionRepeaterSlider(n({},r,i.data[r.id].choices,{value:i.data[r.id].default})));break;case"SectionRepeaterButtonGroup":i.initiated.push(new o.SectionRepeaterButtonGroup(r));break;case"SectionRepeaterIconPicker":i.initiated.push(new o.SectionRepeaterIconPicker(n({},r,{icons:i.data[r.id].icons})));break;case"SectionRepeaterMarginsPaddings":i.initiated.push(new o.SectionRepeaterMarginsPaddings(n({},r,{value:i.data[r.id].default})))}e.elements.length===a+1&&setTimeout(function(){return i.loading=!1},300)})},e.prototype.handleVisibility=function(){var e="visible";this.data.hasOwnProperty(this.type+"_section_visibility")&&(e=this.data[this.type+"_section_visibility"].default),this.header.addClass("epsilon-section-"+e)},e.prototype.handleEvents=function(e){this.minimizeEvent(),this.hideEvent(),this.removeEvent(e),this.updateEvent(e)},e.prototype.hideEvent=function(){var e=this;this.header.on("click",".repeater-row-hide",function(t){t.preventDefault();var i=e.container.find('[data-field="'+e.type+'_section_visibility"]'),n=i.val(),o={hidden:"visible",visible:"hidden"};o.hasOwnProperty(n)&&(e.header.removeClass("epsilon-section-visible epsilon-section-hidden").addClass("epsilon-section-"+o[n]),i.val(o[n]).trigger("change"))})},e.prototype.minimizeEvent=function(){var e=this;this.header.on("click",function(t){jQuery(t.target).is(".repeater-row-hide")||jQuery(t.target).hasClass("epsilon-section-hidden")||e.minimizeToggle()}),this.container.on("click",".repeater-row-minimize",function(){return e.minimizeToggle()})},e.prototype.removeEvent=function(e){var t=this;this.container.on("click",".repeater-row-remove",function(){t.container.slideUp(300,function(){return t.container.detach()}),e.$actions.removeSection(t)})},e.prototype.updateEvent=function(e){var t=this;this.container.on("keyup change","input:not(.epsilon-delegates), select:not(.epsilon-delegates), textarea:not(.epsilon-delegates), checkbox:not(.epsilon-delegates)",function(i){var n=e.$connectors.getValue(),o=jQuery(i.target).attr("type");switch(void 0===o&&jQuery(i.target).is("select")&&jQuery(i.target).attr("multiple")&&(o="multiple-select"),o){case"checkbox":case"epsilon-toggle":n[t.index][jQuery(i.target).data("field")]=jQuery(i.target).prop("checked");break;case"multiple-select":var s=jQuery(i.target)[0];n[t.index][jQuery(i.target).data("field")]=s.selectize.getValue();break;default:n[t.index][jQuery(i.target).data("field")]=i.target.value}e.$_instance.params.selective_refresh&&wp.customize.previewer.send("updated-section-repeater",{control:t.$ID,postId:e.$_instance.params.save_as_meta,value:n[t.index],index:t.index}),e.$connectors.setValue(n)})},e.prototype.minimizeToggle=function(){var e=this;this.sorting||(this.toggled||this.constructExternal(),this.content.slideToggle(300,function(){jQuery("body").removeClass("adding-section adding-doubled-section"),e.container.toggleClass("minimized"),e.header.find(".dashicons:not(.repeater-row-remove):not(.repeater-row-hide)").toggleClass("dashicons-arrow-up-alt2").toggleClass("dashicons-arrow-down-alt2"),jQuery("#sections-left-"+e.$ID).find(".available-sections").removeClass("opened"),wp.customize.previewer.send("epsilon-section-focused",{index:e.index,closed:e.container.hasClass("minimized")}),e.container.siblings().map(function(e,t){jQuery(t).hasClass("minimized")||(jQuery(t).addClass("minimized"),jQuery(t).find(".repeater-row-content").slideToggle(300,function(){jQuery(t).find(".repeater-row-header").find(".dashicons:not(.repeater-row-remove):not(.repeater-row-hide)").toggleClass("dashicons-arrow-up-alt2").toggleClass("dashicons-arrow-down-alt2")}))})}))},e.prototype.forceMinimize=function(){var e=this;this.content.slideUp(300,function(){jQuery("body").removeClass("adding-section adding-doubled-section"),e.container.addClass("minimized"),e.header.find(".dashicons:not(.repeater-row-remove):not(.repeater-row-hide)").addClass("dashicons-arrow-down-alt2").removeClass("dashicons-arrow-up-alt2")})},e.prototype.forceResetIndex=function(){this.index=parseFloat(this.container.attr("data-row"))},e.prototype.addTabs=function(){var e=this,t=[];!_.isUndefined(this.data.groups)&&_.each(this.data.groups,function(e,i){return t.push(i)}),t.map(function(t,i){var n=0===i?"active":"";jQuery(e.container).find('[data-group="'+t+'"]').wrapAll('<div data-tab-id="'+t+'" class="tab-panel '+t+" "+n+'"></div>')}),this._handleTabs()},e.prototype._handleTabs=function(){var e,t=this,i=this.container.find("nav"),n=this.container.find("[data-tab-id]");jQuery(i).on("click","a",function(i){i.preventDefault(),jQuery(i.target).siblings().removeClass("active"),jQuery(i.target).addClass("active"),(e=t.container.find('[data-tab-id="'+jQuery(i.target).attr("data-item")+'"]')).length&&(n.removeClass("active"),e.addClass("active"))})},e.prototype.handleConditionalFields=function(){new o.ConditionalFields(this.data,this.container)},e}();t.EpsilonSectionRepeaterRow=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(47);t.SectionRepeaterEditor=n.default;var o=i(48);t.SectionRepeaterCodeEditor=o.default;var s=i(2);t.SectionRepeaterSelectize=s.default;var a=i(49);t.SectionRepeaterColorPicker=a.default;var r=i(50);t.SectionRepeaterImage=r.default;var c=i(51);t.SectionRepeaterNavigation=c.default;var l=i(52);t.SectionRepeaterSlider=l.default;var u=i(53);t.SectionRepeaterButtonGroup=u.default;var d=i(54);t.SectionRepeaterIconPicker=d.default;var p=i(55);t.SectionRepeaterMarginsPaddings=p.default;var h=i(56);t.SectionRepeaterVideo=h.default;var f=i(3);t.ConditionalFields=f.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.props=e,this.props.container.on("epsilon-changed-position",function(){return t._destroyAndInit()}),this.init()}return e.prototype.init=function(){this.id=this.props.container.find('[data-field="'+this.props.id+'"]').attr("id"),wp.editor.initialize(this.id,{tinymce:{wpautop:!0,browser_spellcheck:!0,mediaButtons:!1,wp_autoresize_on:!0,toolbar1:"link numlist bullist forecolor backcolor bold italic underline",setup:function(e){e.on("change",function(t){e.save(),jQuery(e.getElement()).trigger("change")})}},quicktags:!0})},e.prototype.destroy=function(){wp.editor.remove(this.id)},e.prototype._destroyAndInit=function(){this.destroy(),this.init()},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.props=e,this.props.container.on("epsilon-changed-position",function(){return t._destroyAndInit()}),this.init()}return e.prototype.init=function(){var e=this;this.textarea=this.props.container.find('[data-field="'+this.props.id+'"]'),this.id=this.textarea.attr("id"),this.mode=this.textarea.attr("data-mode");var t=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};t.codemirror=_.extend({},t.codemirror,{mode:this.mode,lineNumbers:!0,lineWrapping:!0,indentUnit:2});var i=wp.codeEditor.initialize(this.id,t);i.codemirror.on("change",function(){e.textarea.val(i.codemirror.getValue()).trigger("change")}),i.codemirror.refresh()},e.prototype.destroy=function(){},e.prototype._destroyAndInit=function(){this.init()},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){var e=this.props.container.find('[data-field="'+this.props.id+'"]'),t={changeDelay:500,theme:"default",change:this.changePallete,format:"rgba"===this.props.mode?"rgb":"hex",opacity:!0};"function"==typeof jQuery.fn.minicolors&&(""!==e.attr("placeholder")&&(e.defaultValue=e.attr("placeholder")),e.minicolors(t),e.parents(".repeater-field-epsilon-color-picker").find("a").on("click",function(e){e.preventDefault();var t=jQuery(e.target).parents(".repeater-field-epsilon-color-picker").find("input.epsilon-color-picker");t.minicolors("value",jQuery(e.target).attr("data-default")),t.trigger("change")}))},e.prototype.changePallete=function(e,t){jQuery(".epsilon-color-scheme-selected").find('*[data-field-id="'+jQuery(this).attr("data-customize-setting-link")+'"]').css("background-color",e)},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e){this.props=e,this.allSizes=this.props.allSizes,this.init()}return e.prototype.init=function(){var e=this;this.container=this.props.container.find('[data-field="'+this.props.id+'"]').parents(".epsilon-controller-image-container"),this.container.on("click keypress",".placeholder, .epsilon-image, .image-replace-button",function(t){t.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(t)||e._imageUpload()}),this.container.on("click keypress",".image-remove-button",function(t){t.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(t)||e._imageRemoval()})},e.prototype._imageUpload=function(){var e=this,t=wp.media({multiple:!1}).open(),i='<option value="full">Full</option>';for(var n in this.allSizes)i+='<option value="'+n+'">'+n+"</option>";jQuery(t.el).find(".media-frame-toolbar > .media-toolbar").append('<label>\n            <select id="epsilon-image-size-selector">\n               '+i+"\n            </select>\n        </label>"),jQuery("#epsilon-image-size-selector").val(this.container.find("input").attr("data-size")),t.on("select",function(){var i,n=e.container.find("input"),o=t.state().get("selection").first(),s=jQuery("#epsilon-image-size-selector").val(),a={id:null,url:""};void 0===o.toJSON().sizes[s]&&(s="full"),a.id=o.id,a.url=o.toJSON().sizes[s].url,i="url"===n.attr("data-save-mode")?a.url:a.id,n.val(i),e._setImage(a.url),e.container.find(".actions .image-replace-button").show(),e.container.find(".actions .image-remove-button").show(),jQuery("#epsilon-image-size-selector").detach()})},e.prototype._imageRemoval=function(){var e=this,t=this.container.find(".epsilon-image");t.length&&t.find("img").fadeOut(200,function(){var i,o=EpsilonTranslations.selectFile+'<span class="recommended-size"></span>',s={action:["Epsilon_Helper","get_image_sizes"],nonce:EpsilonWPUrls.ajax_nonce,args:[]},a=e.container.find("input").attr("data-size");t.removeClass("epsilon-image").addClass("placeholder").html(o),(i=new n.EpsilonAjaxRequest(s)).request(),jQuery(i).on("epsilon-received-success",function(e){_.isUndefined(i.result[a])||t.find(".recommended-size").text(i.result[a].width+" x "+i.result[a].height)})}),this.container.find(".actions .image-replace-button").hide(),this.container.find(".actions .image-remove-button").hide(),this.container.find("input").attr("value","").trigger("change")},e.prototype._setImage=function(e){var t=this.container.find(".epsilon-image").length?this.container.find(".epsilon-image"):this.container.find(".placeholder");t.length&&(t.removeClass("epsilon-image placeholder").addClass("epsilon-image"),t.html(""),t.append('<img style="display:none" src="'+e+'" />'),t.find("img").fadeIn(200)),this.container.find("input").trigger("change")},e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){this.props.container.find('[data-field="'+this.props.id+'"]').on("click",function(e){e.preventDefault(),void 0!==wp.customize.section(jQuery(e.target).attr("data-customizer-section"))&&(jQuery(e.target).attr("data-doubled")?wp.customize.section(jQuery(e.target).attr("data-customizer-section")).headContainer.trigger("click"):wp.customize.section(jQuery(e.target).attr("data-customizer-section")).focus())})},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){var e=this.props.container.find('[data-field="'+this.props.id+'"]');this.props.container=e.parent();var t=this.props.container.find(".ss-slider"),i=e.attr("id"),n=t.attr("id"),o=jQuery("#"+n);o.slider({value:this.props.value,range:"min",min:this.props.min,max:this.props.max,step:this.props.step,slide:function(e,t){jQuery("#"+i).attr("value",t.value)},stop:function(e,t){jQuery("#"+i).trigger("change")}}),jQuery(e).on("focus",function(){jQuery(this).trigger("blur")}),jQuery("#"+i).attr("value",o.slider("value"))},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){var e=this;this.input=this.props.container.find('[data-field="'+this.props.id+'"]'),this.input.parent().on("click","a",function(t){t.preventDefault();var i=jQuery(t.target).attr("data-value");jQuery(t.target).siblings().removeClass("active"),jQuery(t.target).addClass("active"),e.input.val(i).trigger("change")})},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){this.props.container.find('[data-field="'+this.props.id+'"]').fontIconPicker({source:EpsilonIconPack})},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._value={top:null,right:null,bottom:null,left:null,unit:"px"},this._toggler=!1,this.props=e,this.input=this.props.container.find('[data-field="'+this.props.id+'"]'),this.props.container=this.input.parents(".repeater-field"),this.isJson(this.props.value)?this.setInitialValues():this.init(!0)}return Object.defineProperty(e.prototype,"unit",{get:function(){return this._value.unit},set:function(e){this._value.unit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._value.top},set:function(e){this._value.top=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._value.right},set:function(e){this._value.right=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._value.bottom},set:function(e){this._value.bottom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._value.left},set:function(e){this._value.left=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggler",{get:function(){return this._toggler},set:function(e){this._toggler=e,this.props.container.find(".epsilon-spacing-section > .epsilon-equalizer").toggleClass("active")},enumerable:!0,configurable:!0}),e.prototype.setInitialValues=function(){var e=JSON.parse(this.props.value);for(var t in e)this.value.hasOwnProperty(t)&&(this[t]=e[t],this.props.container.find('.epsilon-additional-controls > a[data-additional="'+this.unit+'"]').addClass("selected"),this.props.container.find('.epsilon-spacing-section > input[data-target="'+t+'"]').val(e[t]));this.init(!1)},e.prototype.init=function(e){var t=this;this.props.container.on("change",".epsilon-spacing-section > input",function(e){return t._handleValueChange(e)}),this.props.container.on("click",".epsilon-spacing-section > .epsilon-equalizer",function(e){return t._togglerClicked()}),this.props.container.on("click",".epsilon-additional-controls > a",function(e){return t._setUnit(e)}),e&&this.props.container.find('.epsilon-additional-controls > a[data-additional="'+this.unit+'"]').addClass("selected")},e.prototype._setUnit=function(e){this.unit=jQuery(e.target).attr("data-additional"),this.props.container.find(".epsilon-additional-controls > a").removeClass("selected"),this.props.container.find('.epsilon-additional-controls > a[data-additional="'+this.unit+'"]').addClass("selected"),this.input.val(JSON.stringify(this.value)).trigger("change")},e.prototype._handleValueChange=function(e){var t=jQuery(e.target).attr("data-target");this.value.hasOwnProperty(t)&&(this[t]=e.target.value),this.toggler&&this._equalizeValues(e.target.value),this.input.val(JSON.stringify(this.value)).trigger("change")},e.prototype._togglerClicked=function(){this.toggler?this.toggler=!1:this._equalizeInputs()},e.prototype._equalizeValues=function(e){for(var t in this.value)"unit"!==t&&(this[t]=e,this.props.container.find('.epsilon-spacing-section > input[data-target="'+t+'"]').val(e))},e.prototype._equalizeInputs=function(){var e={};for(var t in this.value)"unit"!==t&&(e[t]=parseInt(this.value[t]));var i=Object.keys(e).reduce(function(t,i){return e[i]>t?e[i]:t},-1/0);for(var t in i===-1/0&&(i=0),this.value)"unit"!==t&&(this[t]=i,this.props.container.find('.epsilon-spacing-section > input[data-target="'+t+'"]').val(i).trigger("change"));this.toggler=!0},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.props=e,this.init()}return e.prototype.init=function(){var e=this;this.container=this.props.container.find('[data-field="'+this.props.id+'"]').parents(".epsilon-controller-video-container"),this.container.on("click keypress",".video-upload-button",function(t){t.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(t)||e._videoUpload()}),this.container.on("click keypress",".video-upload-remove-button",function(t){t.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(t)||e._videoRemoval()})},e.prototype._videoUpload=function(){var e=this,t=wp.media({multiple:!1,library:{type:"video"}}).open();t.on("select",function(){var i=e.container.find("input"),n=t.state().get("selection").first(),o={url:null,label:null};n=n.toJSON(),o.url=n.url,o.label=n.filename,i.val(JSON.stringify(o)),e._setVideo(n),e.container.find(".actions .video-upload-remove-button").show()})},e.prototype._videoRemoval=function(){this.container.find(".epsilon-video");this.container.find(".actions .video-upload-remove-button").hide(),this.container.find("input").attr("value","").trigger("change"),this._setVideo({filename:EpsilonTranslations.selectVideo})},e.prototype._setVideo=function(e){var t=this.container.find(".epsilon-video").length?this.container.find(".epsilon-video"):this.container.find(".placeholder");t.length&&(t.removeClass("epsilon-video placeholder").addClass("epsilon-video"),t.html(""),t.append("<span>"+e.filename+"</span>")),this.container.find("input").trigger("change")},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={moveElements:function(){var e=jQuery(".wp-full-overlay");jQuery("#sections-left-"+this.$ID).appendTo(e),jQuery("#importable-sections-"+this.$ID).appendTo(e)},resetIndexes:function(e){return this.state.rows.map(function(e,t){e.index=t,e.data.index=t}),e.map(function(e,t){e.index=t}),e},mergeData:function(e){return jQuery.extend(!0,{},this.$_instance.params.sections[e].fields,{groups:this.$_instance.params.sections[e].groups})},pluckValues:function(e){var t={type:e.type,index:e.index};return _.each(e,function(e){if(!e.hasOwnProperty("id"))return!1;t[e.id]=e.default}),t},setTemplateDefaults:function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(e[i].default=t[i]);return e},repeaterTemplate:function(){return function(e){return _.template(jQuery(".customize-control-epsilon-repeater-content-section").html(),null,{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"})(e)}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={setValue:function(e){this.$_instance.setting.set([]),this.$_instance.setting.set(e)},getValue:function(){return this.$_instance.setting.get()},addNewSection:function(e){var t=this.$connectors.getValue();t.push(e),this.$connectors.setValue(t)},importSections:function(e){var t=this;this.state.loading=!0,e.map(function(e){t.$actions.addSection(e)}),this.state.loading=!1}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(60);wp.customize.controlConstructor["epsilon-button-group"]=wp.customize.Control.extend({ready:function(){new n.EpsilonButtonGroup(this)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.control=e,this.context=e.container,this.handleEvents()}return e.prototype.handleEvents=function(){var e=this;this.context.on("click",".epsilon-control-group > a",function(t){t.preventDefault();var i=jQuery(this).attr("data-value");jQuery(this).siblings().removeClass("active"),jQuery(this).addClass("active"),e.control.hasOwnProperty("repeater")?jQuery(this).parent().find("input").val(i).trigger("change"):e.control.setting.set(jQuery(this).attr("data-value"))})},e}();t.EpsilonButtonGroup=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(62);wp.customize.controlConstructor["epsilon-page-changer"]=wp.customize.Control.extend({ready:function(){new n.EpsilonPageChanger(this)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=e.container.find(".new-content-item"),i=this;this.control=e,e.container.on("click",".add-new-toggle",function(e){jQuery(e.currentTarget).slideUp(180),t.slideDown(180),t.find(".create-item-input").focus()}),e.container.on("click",".add-content",function(){i.addNewPage()}),e.container.on("keydown",".create-item-input",function(e){13===e.which&&i.addNewPage()}),this.startSelectize(),this.handleEvents()}return e.prototype.startSelectize=function(){try{this.control.container.find("select").selectize()}catch(e){console.warn("selectize not yet loaded")}},e.prototype.handleEvents=function(){this.control.container.on("change","select",function(e){wp.customize.previewer.previewUrl.set(jQuery(e.target).val())})},e.prototype.addNewPage=function(){var e=this.control,t=e.container.find(".add-new-toggle"),i=e.container.find(".new-content-item"),n=e.container.find(".create-item-input"),o=n.val();e.container.find("select");if(o){n.removeClass("invalid"),n.attr("disabled","disabled");var s=jQuery.ajax({type:"POST",dataType:"json",url:EpsilonWPUrls.ajaxurl,data:{action:"epsilon_framework_ajax_action",args:{action:["Epsilon_Helper","create_page"],nonce:EpsilonWPUrls.ajax_nonce,args:{epsilon_page_name:o,epsilon_customizer_section:e.section(),epsilon_control_id:e.params.page_builder_id}}}});s.done(function(n){if(n.status){var s=e.params.page_builder_id+"_"+n.id,a={id:s,save_as_meta:n.id,type:"epsilon-section-repeater",section:e.section(),page_builder:!0,selective_refresh:!1,sortable:!0,integrations:e.params.integrations,integrations_count:e.params.integrations_count,importable:e.params.importable,sections:e.params.sections,settings:{default:s},choices:{},value:[],label:o},r=new wp.customize.settingConstructor["epsilon-section-repeater"](s,[]);wp.customize.add(r);var c=new wp.customize.controlConstructor["epsilon-section-repeater"](s,a);wp.customize.control.add(c);var l=e.container.find("select")[0].selectize;l.addOption({value:n.url,text:o}),l.setValue(n.url)}i.slideUp(180),t.slideDown(180)}),s.always(function(e){n.val("").removeAttr("disabled")})}else n.addClass("invalid")},e}();t.EpsilonPageChanger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(64);wp.customize.controlConstructor["epsilon-image-dimensions"]=wp.customize.Control.extend({ready:function(){new n.EpsilonImageDimensions(this)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.control=null,this.linkedControl=null,this.value={width:null,height:null,ratio:!0,linked_control:""},this.imageSizes={width:0,height:0},this.hasImage=!1,this.api=wp.customize,this.control=e,this.value.linked_control=e.params.linkedControl,this.mergeValues(),this.linkedControl=this.api.control(e.params.linkedControl),this.setLinkedControlSpecs(),this.init()}return e.prototype.init=function(){var e=this;this.handleInputChanges(),this.handleAspectRatio(),this.linkedControl.setting.bind("change",function(){e.linkedControlChanged()})},e.prototype.mergeValues=function(){return jQuery.extend(this.value,this.control.params.value)},e.prototype.setLinkedControlSpecs=function(){this.imageSizes={width:0,height:0},this.hasImage=void 0!==this.linkedControl.params.attachment,this.hasImage&&(this.imageSizes={width:this.linkedControl.params.attachment.width,height:this.linkedControl.params.attachment.height})},e.prototype.handleAspectRatio=function(){var e=this;this.control.container.find('input[type="checkbox"]').on("change",function(t){e.value.ratio=jQuery(t.target).prop("checked"),e.saveData()})},e.prototype.handleInputChanges=function(){var e=this;this.control.container.find('input[type="text"]').on("keyup",_.debounce(function(t){var i=jQuery(t.target).attr("data-type"),n=jQuery(t.target).val();void 0!==i&&("string"==typeof n&&(n=parseInt(n)),e.setDimension(i,n))},200))},e.prototype.linkedControlChanged=function(){void 0!==this.linkedControl.params.attachment&&(this.setLinkedControlSpecs(),this.control.container.find('input[data-type="width"]').val(this.linkedControl.params.attachment.width).change(),this.control.container.find('input[data-type="height"]').val(this.linkedControl.params.attachment.height).change())},e.prototype.setDimension=function(e,t){void 0!==e&&this.value.hasOwnProperty(e)&&(this.value[e]=t,this.value.ratio&&this.calculateRatio(e),this.saveData())},e.prototype.calculateRatio=function(e){switch(e){case"width":this.value.height=Math.ceil(this.value.width*this.linkedControl.params.attachment.height/this.linkedControl.params.attachment.width),this.control.container.find('input[data-type="height"]').val(this.value.height);break;default:this.value.width=Math.ceil(this.value.height*this.linkedControl.params.attachment.width/this.linkedControl.params.attachment.height),this.control.container.find('input[data-type="width"]').val(this.value.width)}},e.prototype.saveData=function(){this.control.setting(JSON.stringify(this.value))},e}();t.EpsilonImageDimensions=n},function(e,t){wp.customize.panelConstructor["epsilon-panel-regular"]=wp.customize.Panel.extend({_panelEmbed:wp.customize.Panel.prototype.embed,_panelIsContextuallyActive:wp.customize.Panel.prototype.isContextuallyActive,_panelAttachEvents:wp.customize.Panel.prototype.attachEvents,ready:function(){this.params.hidden&&this.container.addClass("epsilon-hidden"),wp.customize.bind("pane-contents-reflowed",function(){var e=[];wp.customize.panel.each(function(t){"epsilon-panel-regular"===t.params.type&&void 0!==t.params.panel&&e.push(t)}),e.sort(wp.customize.utils.prioritySort).reverse(),jQuery.each(e,function(e,t){jQuery("#sub-accordion-panel-"+t.params.panel).children(".panel-meta").after(t.headContainer)}),jQuery(document).trigger("epsilon-reflown-panels")})},attachEvents:function(){var e=this;"epsilon-panel-regular"===this.params.type&&void 0!==this.params.panel?(this._panelAttachEvents.call(this),e.expanded.bind(function(t){var i=wp.customize.panel(e.params.panel);t?i.contentContainer.addClass("current-panel-parent"):i.contentContainer.removeClass("current-panel-parent")}),e.container.find(".customize-panel-back").off("click keydown").on("click keydown",function(t){wp.customize.utils.isKeydownButNotEnterEvent(t)||(t.preventDefault(),e.expanded()&&wp.customize.panel(e.params.panel).expand())})):this._panelAttachEvents.call(this)},isContextuallyActive:function(){var e=this,t=this._children("panel","section"),i=0;return"epsilon-panel-regular"!==this.params.type?this._panelIsContextuallyActive.call(this):(wp.customize.panel.each(function(i){i.params.panel&&i.params.panel===e.id&&t.push(i)}),t.sort(wp.customize.utils.prioritySort),_(t).each(function(e){e.active()&&e.isContextuallyActive()&&(i+=1)}),0!==i)},embed:function(){var e=jQuery("#sub-accordion-panel-"+this.params.panel);"epsilon-panel-regular"===this.params.type&&void 0!==this.params.panel?(this._panelEmbed.call(this),e.append(this.headContainer)):this._panelEmbed.call(this)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(67);wp.customize.sectionConstructor["epsilon-section-doubled"]=wp.customize.Section.extend({ready:function(){new n.EpsilonSectionDoubled(this)},attachEvents:function(){},isContextuallyActive:function(){return!0}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.section=e,this.createParent(),this.section.container.appendTo(this.parent),this.handleEvents()}return e.prototype.handleEvents=function(){var e=this,t=this.section;t.container.on("click",".epsilon-close-doubled-section",function(e){e.preventDefault(),jQuery("body").removeClass("adding-doubled-section"),jQuery("body").find(".doubled-section-opened").removeClass("doubled-section-opened")}),t.headContainer.on("click",function(i){var n,o,s;i.preventDefault(),(n=e.parent.find(".doubled-section-opened")).length&&n.removeClass("doubled-section-opened"),jQuery("body").hasClass("adding-doubled-section")?(void 0!==(o=jQuery(this).attr("id"))&&(o=o.replace("accordion-section-","")),void 0!==(s=n.attr("id"))&&(s=s.replace("sub-accordion-section-","")),s===o&&jQuery("body").removeClass("adding-doubled-section")):jQuery("body").addClass("adding-doubled-section"),jQuery.each(t.container,function(){jQuery(this).is("li")||jQuery(this).addClass("doubled-section-opened")})})},e.prototype.createParent=function(){var e=jQuery(".wp-full-overlay").find(".doubled-section-parent");e.length||(jQuery(".wp-full-overlay").append('<div class="doubled-section-parent"></div>'),e=jQuery(".wp-full-overlay").find(".doubled-section-parent"),this.parent=e),this.parent=e},e}();t.EpsilonSectionDoubled=n},function(e,t){wp.customize.sectionConstructor["epsilon-section-pro"]=wp.customize.Section.extend({attachEvents:function(){},isContextuallyActive:function(){return!0}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(70);wp.customize.sectionConstructor["epsilon-section-recommended-actions"]=wp.customize.Section.extend({ready:function(){new n.EpsilonSectionRecommended(this)},attachEvents:function(){},isContextuallyActive:function(){return!0}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e){this.ajax=!1,this.section=e,this.context=this.section.container,this.actions=this.section.params.actions.length,this.handleDismissals(),this.handleEvents()}return e.prototype.handleDismissals=function(){this._dismissPlugin(),this._dismissAction()},e.prototype.handleEvents=function(){this.context.on("click",".epsilon-close-recommended-section",function(e){e.preventDefault(),jQuery(this).find("span").toggleClass("dashicons-arrow-down-alt2"),jQuery(".recommended-actions_container").slideToggle(200)}),jQuery(document).on("epsilon-plugin-activated",function(e,t){var i=jQuery("span#"+t.plugin).parents(".epsilon-recommended-plugins"),n=i.next();i.fadeOut("200",function(){n.css({opacity:1,height:"initial"}).fadeIn("200")})})},e.prototype._dismissPlugin=function(){var e=this;this.context.find(".epsilon-recommended-plugin-button").on("click",function(t){var i,o,s,a=jQuery(this).parents(".epsilon-recommended-actions-container"),r=a.next(),c=a.parents(".control-section-epsilon-section-recommended-actions").find("h3"),l={action:["Epsilon_Notify_System","dismiss_required_action"],nonce:EpsilonWPUrls.ajax_nonce,args:{id:jQuery(this).attr("id"),option:jQuery(this).attr("data-option")}};e.ajax||(e.ajax=!0,(i=new n.EpsilonAjaxRequest(l)).request(),jQuery(i).on("epsilon-received-success",function(t){e.ajax=!1,i.result&&"ok"===i.result.message&&a.fadeOut("200",function(){r.is("p")&&(o=c.find(".section-title"),s=o.attr("data-social"),o.text(s)),r.css({opacity:1,height:"initial"}).fadeIn("200")})}))})},e.prototype._dismissAction=function(){var e=this;this.context.find(".epsilon-dismiss-required-action").on("click",function(t){var i,o,s,a,r=jQuery(this).parents(".epsilon-recommended-actions-container"),c=r.parents(".control-section-epsilon-section-recommended-actions").find("h3"),l=c.find(".epsilon-actions-count > .current-index"),u=r.next(),d={action:["Epsilon_Notify_System","dismiss_required_action"],nonce:EpsilonWPUrls.ajax_nonce,args:{id:jQuery(this).attr("id"),option:jQuery(this).attr("data-option")}},p=l.attr("data-total"),h=r.attr("data-index");"undefined"!==p&&(p=parseInt(p)),"undefined"!==h&&(h=parseInt(h)),e.ajax||(e.ajax=!0,(a=new n.EpsilonAjaxRequest(d)).request(),jQuery(a).on("epsilon-received-success",function(t){e.ajax=!1,a.result&&"ok"===a.result.message&&(p<=h?(i=c.find(".section-title"),o=jQuery(".epsilon-recommended-plugins"),s=i.attr("data-social"),o.length&&(s=i.attr("data-plugin_text")),c.find(".epsilon-actions-count").remove(),i.text(s)):l.text(h+1),r.fadeOut("200",function(){u.css({opacity:1,height:"initial"}).fadeIn("200")}))}))})},e}();t.EpsilonSectionRecommended=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.objects=[],wp.customize.bind("ready",function(){e.collectElements(),e.handleCloseEvent()})}return e.prototype.handleCloseEvent=function(){this.objects.map(function(e){e.show(),e.on("click",".epsilon-button-link-close-section",function(t){e.hide(200)})})},e.prototype.collectElements=function(){var e=this;jQuery(".epsilon-button-link-close-section").map(function(t,i){e.objects.push(jQuery(i).parent())})},e}();t.EpsilonSectionDescriptionEnhancer=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.sections=[],wp.customize.bind("ready",function(){e.collectSections(),e.handleEvents()})}return e.prototype.collectSections=function(){var e=this;_.each(jQuery("[id^=accordion-section-]"),function(t){var i=jQuery(t).attr("id");i.search("header")>-1&&e.sections.push({frontend:"#wrap",section:i,changePage:!1,type:"header"}),i.search("footer")>-1&&e.sections.push({frontend:"#footer",section:i,changePage:!1,type:"footer"}),EpsilonWPUrls.post_page&&(i.search("blog")>-1||i.search("header_image")>-1)&&e.sections.push({section:i,changePage:!0,url:EpsilonWPUrls.post_page}),EpsilonWPUrls.front_page&&i.search("static_front_page")>-1&&e.sections.push({section:i,changePage:!0,url:EpsilonWPUrls.front_page})})},e.prototype.handleEvents=function(){var e=this;this.sections.map(function(t){jQuery("#"+t.section).on("click","h3",function(i){t.changePage?e._changePage(t):e._scrollTo(t)})})},e.prototype._changePage=function(e){wp.customize.previewer.previewUrl(e.url),jQuery("[id^=sub-"+e.section+"]").on("click","button.customize-section-back",function(){wp.customize.previewer.previewUrl(wp.customize.previewer.allowedUrls[0])})},e.prototype._scrollTo=function(e){wp.customize.previewer.send("epsilon-"+e.type+"-focused",e.frontend)},e}();t.EpsilonZoneFocus=n},,,,,,,,,,,,function(e,t){}]);
//# sourceMappingURL=epsilon-framework-customizer.js.map